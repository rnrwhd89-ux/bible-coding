# 성경 앱 QA 최종 리포트

**테스트 날짜:** 2026-02-08
**테스트 URL:** http://localhost:3000 (개발 서버)
**테스트 환경:** macOS / Chrome / 데스크톱 (1107x1110)
**테스터:** Claude Code (자동화 QA)

---

## 요약

| 항목 | 결과 |
|------|------|
| **총 테스트 항목** | 25개 (수동 테스트) |
| **PASS** | 23개 |
| **FAIL** | 0개 |
| **SKIP** | 2개 (로그인/동기화 관련) |
| **발견 버그** | 1개 (수정 완료) |
| **QA 라운드** | 3회 |

---

## 1차 QA (2026-02-07) - 버그 발견 및 수정

### 발견 버그: 휠 피커 book-reset 버그
- **심각도:** High
- **증상:** 장(chapter) 피커를 스크롤하면 책(book) 피커가 창세기로 리셋됨
- **원인:** `setPickerChapter()` 상태 변경이 React re-render를 일으키고, IIFE 내부의 책 피커 스크롤 위치가 0으로 초기화되어 `onScroll` 핸들러가 index 0 (창세기)을 감지
- **수정 방법:**
  1. 장 피커를 state 대신 ref (`pickerChapterRef`)로 변경하여 re-render 방지
  2. `pickerScrollingRef` guard flag로 책 변경 중 중복 트리거 방지
- **수정 파일:** `bible-app/src/App.js` (line 116: `pickerScrollingRef` 선언 추가)
- **상태:** 수정 완료 및 검증 완료

---

## 2차 QA (2026-02-08) - 핵심 기능 검증

### 카테고리 1: 휠 피커 (신규 기능)

| # | 테스트 | 결과 | 비고 |
|---|--------|------|------|
| 1 | 피커 열기 (버튼 클릭) | PASS | 드롭다운 애니메이션 정상 |
| 2 | 책 스크롤 (OT) | PASS | 창세기 → 사무엘상 스크롤 정상 |
| 3 | 장 스크롤 (book-reset 버그 검증) | PASS | 장 스크롤 시 책 유지됨 |
| 4 | 확인 버튼 → 본문 로드 | PASS | 사무엘상 27장 정상 로드 |
| 5 | 현재 위치 자동 스크롤 | PASS | 재오픈 시 현재 책/장 위치로 스크롤 |

### 카테고리 2: 구절 선택

| # | 테스트 | 결과 | 비고 |
|---|--------|------|------|
| 6 | 단일 구절 선택 | PASS | 체크마크, 하단 메뉴 표시 |
| 7 | 복수 선택 (Cmd 키 없이) | PASS | 구절 1,3 동시 선택 성공 |
| 8 | 선택 해제 (X 버튼) | PASS | 메뉴 닫힘, 선택 초기화 |

### 카테고리 3: 하이라이트

| # | 테스트 | 결과 | 비고 |
|---|--------|------|------|
| 9 | 하이라이트 적용 (초록) | PASS | 구절 1,3에 초록 하이라이트 |
| 10 | 번역 전환 후 하이라이트 유지 | PASS | NIV 전환 후에도 유지 |

### 카테고리 4: 번역 전환

| # | 테스트 | 결과 | 비고 |
|---|--------|------|------|
| 11 | 개역개정 → NIV | PASS | 영어 텍스트 정상 표시 |
| 12 | NIV → 개역개정 | PASS | 한국어(개역개정) 정상 |
| 13 | 개역개정 → 개역한글 | PASS | 미세한 번역 차이 확인 |
| 14 | 번역 피커 UI | PASS | 3개 옵션, 현재 선택 하이라이트 |

### 카테고리 5: 탭 네비게이션

| # | 테스트 | 결과 | 비고 |
|---|--------|------|------|
| 15 | 성경 탭 | PASS | 본문 정상 표시 |
| 16 | AI 질문 탭 | PASS | 빈 상태 메시지 정상 |
| 17 | 메모 탭 | PASS | "0개의 메모" 빈 상태 정상 |
| 18 | 읽기표 탭 | PASS | 66권 1189장 그리드 정상 |

### 카테고리 6: 기타

| # | 테스트 | 결과 | 비고 |
|---|--------|------|------|
| 19 | 로그인 모달 | PASS | Google 로그인 + 나중에 하기 |
| 20 | 콘솔 에러 확인 | PASS | 에러 0건 |
| 21 | 로그인/동기화 기능 | SKIP | 계정 필요 |
| 22 | 데이터 동기화 검증 | SKIP | 계정 필요 |

---

## 3차 QA (2026-02-08) - 엣지 케이스 및 신약 테스트

| # | 테스트 | 결과 | 비고 |
|---|--------|------|------|
| 23 | 피커: 신약 먼 책 스크롤 (골로새서) | PASS | 대량 스크롤 정상 |
| 24 | 피커: 신약 책 + 장 스크롤 조합 | PASS | 골로새서 4장 정확히 로드 |
| 25 | 개역개정 신약 (Firestore) | PASS | CSV 업로드 후 정상 표시 |

---

## CSV 데이터 업로드 현황

| 항목 | 값 |
|------|-----|
| 기존 데이터 | 25,798개 구절 |
| 신규 추가 | 3,869개 구절 |
| 누락 (이전 중복제거) | 1,400개 구절 |
| **최종 총계** | **31,067개 구절** |
| 목표 (CSV 기준) | ~31,070개 |
| 완성률 | 99.99% |

---

## 수정 이력

### 버그 #1: 구절 복수 선택 (수정 완료 - 이전 세션)
- Cmd/Ctrl 키 없이 클릭으로 복수 선택 가능하도록 변경

### 버그 #2: 휠 피커 book-reset (수정 완료 - 이번 세션)
- `pickerScrollingRef` 선언 누락 → 재선언으로 컴파일 에러 해결
- 장 피커를 ref-only로 변경하여 re-render 문제 해결

---

## 미해결 이슈

없음. 모든 발견된 버그가 수정 완료됨.

---

## 개선 제안 (Low Priority)

1. **피커 아이템 클릭**: 현재 스크롤만 지원 — 아이템 직접 클릭으로도 선택 가능하면 UX 향상
2. **번역명 표시**: 개역개정/개역한글이 비슷한 이름 → 부제나 설명 추가 고려
3. **빈 상태 UX**: 메모/AI 탭의 빈 상태에서 바로 성경 탭으로 이동하는 버튼 추가

---

## 결론

3회에 걸친 QA 테스트 결과, 성경 앱의 핵심 기능은 모두 정상 동작합니다.
- **휠 피커**: 스크롤 기반 책/장 선택이 안정적으로 동작
- **구절 선택/하이라이트**: 복수 선택, 하이라이트 적용/유지 정상
- **번역 전환**: 3개 번역(개역개정, 개역한글, NIV) 모두 정상
- **탭 네비게이션**: 4개 탭 모두 정상 렌더링
- **데이터**: Firestore CSV 업로드 완료 (31,067/31,070개)
- **콘솔 에러**: 0건
